# Beast Mode: AI Feature Workflow
# For: Any feature involving LLMs, ML models, or AI services
# Time to Start: < 20 minutes

id: ai-feature
name: "ðŸ¤– AI Feature Flow"
description: "Specialized workflow for AI/ML feature development."
estimated_time: "1-2 weeks"

trigger_conditions:
  - LLM integration
  - AI-powered features
  - ML model deployment
  - Chatbot/assistant features
  - AI content generation

phases:
  # === ANALYSIS PHASE ===
  - phase: Analyze
    agent: analyst
    command: "*analyze-problem context: '{issue}'"
    artifact: "docs/bmad/{slug}/01-analysis.md"
    required: true

  - phase: PRD
    agent: pm
    command: "*create-prd source: 'docs/bmad/{slug}/01-analysis.md'"
    artifact: "docs/bmad/{slug}/01b-prd.md"
    required: true
    gates:
      - AI success criteria defined
      - Fallback behavior specified
      - User expectations managed

  # === AI-SPECIFIC PLANNING ===
  - phase: Prompt Design
    agent: prompt-eng
    command: "*design-prompt source: 'docs/bmad/{slug}/01b-prd.md'"
    artifact: "docs/bmad/{slug}/ai-01-prompt-spec.md"
    required: true
    gates:
      - System prompt defined
      - Few-shot examples ready
      - Output format specified
      - Edge cases documented

  - phase: AI Safety Review
    agent: ai-safety
    command: "*safety-audit source: 'docs/bmad/{slug}/ai-01-prompt-spec.md'"
    artifact: "docs/bmad/{slug}/ai-03-safety-audit.md"
    required: true
    gates:
      - Bias risks assessed
      - Hallucination safeguards defined
      - User transparency ensured
      - Fallback behavior validated

  - phase: Cost Analysis
    agent: ai-cost
    command: "*cost-analysis source: 'docs/bmad/{slug}/ai-01-prompt-spec.md'"
    artifact: "docs/bmad/{slug}/ai-05-cost-analysis.md"
    required: true
    gates:
      - Token usage estimated
      - Cost projections acceptable
      - Rate limits defined
      - Caching strategy planned

  # === ARCHITECTURE ===
  - phase: AI Architecture
    agent: ai-arch
    command: "*design-integration source: 'docs/bmad/{slug}/02-technical-spec.md'"
    artifact: "docs/bmad/{slug}/ai-07-integration-spec.md"
    required: true
    gates:
      - Retry logic defined
      - Streaming handled
      - Fallbacks implemented
      - Provider abstracted

  - phase: Technical Spec
    agent: architect
    command: "*define-contract source: 'docs/bmad/{slug}/01b-prd.md'"
    artifact: "docs/bmad/{slug}/02-technical-spec.md"
    required: true

  # === IMPLEMENTATION ===
  - phase: Implement
    agent: dev
    command: "*implement-fix spec: 'docs/bmad/{slug}/02-technical-spec.md'"
    artifact: "docs/bmad/{slug}/03-implementation.md"
    required: true
    gates:
      - Prompt templates versioned
      - Error handling robust
      - Observability added

  - phase: Prompt Evaluation
    agent: prompt-eng
    command: "*prompt-eval source: 'docs/bmad/{slug}/ai-01-prompt-spec.md'"
    artifact: "docs/bmad/{slug}/ai-02-prompt-eval.md"
    required: true
    gates:
      - Standard inputs pass
      - Edge cases handled
      - Adversarial inputs blocked

  - phase: QA
    agent: qa
    command: "*review-feature spec: 'docs/bmad/{slug}/02-technical-spec.md'"
    artifact: "docs/bmad/{slug}/04-qa-report.md"
    required: true
    gates:
      - AI responses validated
      - Fallbacks tested
      - Performance acceptable

ai_specific_gates:
  - Token budget enforced
  - Prompt version tracked
  - Response caching implemented
  - User feedback mechanism in place
  - AI disclosure to users
